Vue.component("videodesc",{template:'<div class="card mt-3"><div class=card-header>Descripción</div><div class=card-body><blockquote class="blockquote mb-0"><p>{{value}}</blockquote></div></div>',props:["value"]}),Vue.component("escribir-comentario",{template:'<div><button class="btn btn-secondary mb-1"id=toggleButton @click="showUseAccount = !showUseAccount">Usar cuenta de usuario</button><form id=comments-form><div class="card p-2"id=account v-if=showUseAccount><small class=text-muted>Si no tienes una cuenta se creará automáticamente</small> <input class="m-1 form-control"id=nombre placeholder="Nombre de usuario"> <input class="m-1 form-control"id=password placeholder=Contraseña type=password></div><textarea class="m-1 form-control mt-2"id=contenido placeholder="Escribe tu opinión sobre el vídeo"></textarea> <button class="m-1 btn btn-primary"id=submitComment type=submit>Comentar</button></form></div>',data:function(){return{showUseAccount:!1}}});const app=new Vue({el:"#app"});function getVideo(){let o=location.href.split("/");return o[o.length-1]}function leerComentarios(){const o={video:getVideo()};$.post("/controllers/ListComments.php",o,o=>{let e=JSON.parse(o),t="";e.forEach(o=>{t+='<div class="card m-1 p-1"><h6 class="card-title">'+o.usuario+'</h6><p class="card-text">'+o.contenido+"</p></div>"}),$("#comentarios").html(t)})}$(function(){leerComentarios(),$("#comments-form").submit(o=>{o.preventDefault();const e={nombre:$("#nombre").val(),password:$("#password").val(),contenido:$("#contenido").val(),video:getVideo()};$.post("/controllers/AddComment.php",e,o=>{if(console.log(o),"Datos de usuario incorrectos"==o)$("#account").attr("class","border border-danger card p-2"),$("#account").append('<small id="log-error" class="text-danger">Datos incorrectos</small>');else{$("#comments-form").trigger("reset"),$("#account").attr("class","border border-success card p-2"),leerComentarios();try{$("#account").remove('<small id="log-error" class="text-danger">Datos incorrectos</small>')}catch(o){}}})})});